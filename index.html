<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Bon Pengebonan Laboratorium</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family:Arial;
background:#f4f6f9;
padding:30px;
}
.container{
background:white;
padding:20px;
border-radius:10px;
box-shadow:0 0 10px rgba(0,0,0,0.2);
}
table{
width:100%;
border-collapse:collapse;
margin-bottom:20px;
}
th,td{
border:1px solid #ddd;
padding:8px;
}
button{
padding:8px 12px;
background:#2d6cdf;
color:white;
border:none;
border-radius:5px;
cursor:pointer;
margin-top:5px;
}
button:hover{
background:#1c4fa3;
}
canvas{
border:1px solid black;
}
</style>
</head>

<body>

<div class="container" id="bonArea">

<h2 style="text-align:center">BON PENGEBONAN LABORATORIUM</h2>

<label>Nama Mahasiswa</label>
<input type="text" id="nama" style="width:100%;padding:8px"><br><br>

<label>Mata Kuliah</label>
<input type="text" id="matkul" style="width:100%;padding:8px"><br><br>

<h3>Alat</h3>
<table id="alatTable">
<tr><th>Nama</th><th>Jumlah</th><th>Aksi</th></tr>
</table>
<button onclick="tambahAlat()">+ Tambah Alat</button>

<h3>Bahan</h3>
<table id="bahanTable">
<tr><th>Nama</th><th>Jumlah</th><th>Aksi</th></tr>
</table>
<button onclick="tambahBahan()">+ Tambah Bahan</button>

<h3>Tanda Tangan Mahasiswa</h3>
<canvas id="ttd" width="400" height="200"></canvas><br>
<button onclick="clearTTD()">Hapus TTD</button>

<br><br>
<button onclick="downloadPDF()">Download BON PDF</button>

</div>

<script>

function tambahAlat(){
let row = document.getElementById("alatTable").insertRow();
row.innerHTML=`
<td><input type="text"></td>
<td><input type="number"></td>
<td><button onclick="this.parentElement.parentElement.remove()">Hapus</button></td>
`;
}

function tambahBahan(){
let row = document.getElementById("bahanTable").insertRow();
row.innerHTML=`
<td><input type="text"></td>
<td><input type="number"></td>
<td><button onclick="this.parentElement.parentElement.remove()">Hapus</button></td>
`;
}

/* SIGNATURE PAD */
let canvas=document.getElementById("ttd");
let ctx=canvas.getContext("2d");
let drawing=false;

canvas.addEventListener("mousedown",()=>drawing=true);
canvas.addEventListener("mouseup",()=>drawing=false);
canvas.addEventListener("mousemove",draw);

function draw(e){
if(!drawing)return;
ctx.lineWidth=2;
ctx.lineCap="round";
ctx.lineTo(e.offsetX,e.offsetY);
ctx.stroke();
ctx.beginPath();
ctx.moveTo(e.offsetX,e.offsetY);
}

function clearTTD(){
ctx.clearRect(0,0,canvas.width,canvas.height);
}

/* DOWNLOAD PDF */
async function downloadPDF(){
const { jsPDF } = window.jspdf;
let canvas = await html2canvas(document.getElementById("bonArea"));
let img = canvas.toDataURL("image/png");

let pdf = new jsPDF("p","mm","a4");
let width = 210;
let height = canvas.height * width / canvas.width;

pdf.addImage(img,"PNG",0,0,width,height);
pdf.save("BON_LAB.pdf");
}

</script>

</body>
</html>


